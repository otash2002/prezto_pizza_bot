<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Presto Pizza</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { 
            --main: #ffcc00; 
            --bg: #0a0a0a; 
            --card: #fff; 
            --text: #000; 
            --shadow: rgba(255, 204, 0, 0.3);
        }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            color: white; 
            padding: 0 15px 160px 15px; 
            overflow-x: hidden; 
        }
        
        /* Header */
        .header { 
            position: sticky; 
            top: 0; 
            background: linear-gradient(180deg, rgba(10,10,10,0.98) 0%, rgba(10,10,10,0.95) 100%);
            backdrop-filter: blur(10px);
            padding: 20px 0; 
            z-index: 100; 
            border-bottom: 3px solid var(--main); 
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }
        .header h1 { 
            color: var(--main); 
            font-size: 28px; 
            text-align: center; 
            text-transform: uppercase; 
            letter-spacing: 2px;
            text-shadow: 2px 2px 8px rgba(255, 204, 0, 0.4);
        }
        
        /* Category */
        .category-title { 
            color: var(--main); 
            margin: 30px 0 20px; 
            border-left: 5px solid var(--main); 
            padding-left: 15px; 
            text-transform: uppercase; 
            font-weight: 900; 
            font-size: 20px;
            letter-spacing: 1px;
            text-shadow: 1px 1px 5px rgba(255, 204, 0, 0.3);
        }
        
        /* Grid */
        .grid { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 15px; 
            margin-bottom: 20px;
        }
        
        /* Card */
        .card { 
            background: var(--card); 
            border-radius: 20px; 
            padding: 0;
            color: var(--text); 
            display: flex; 
            flex-direction: column;
            min-height: 280px;
            box-shadow: 0 8px 25px var(--shadow);
            transition: all 0.3s ease;
            overflow: hidden;
        }
        .card:active {
            transform: scale(0.98);
        }
        .card.has-items { 
            border: 3px solid var(--main);
            box-shadow: 0 0 30px var(--shadow);
        }
        
        /* Image Container */
        .product-media { 
            width: 100%; 
            height: 140px; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
            overflow: hidden;
            position: relative;
        }
        .product-media::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.1) 100%);
        }
        .product-media img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        .card:active .product-media img {
            transform: scale(1.05);
        }
        
        /* Product Info */
        .product-info {
            padding: 12px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .product-name { 
            font-weight: 700; 
            font-size: 15px; 
            margin-bottom: 8px;
            line-height: 1.3;
            color: #1a1a1a;
        }
        .product-price { 
            color: #e74c3c; 
            font-weight: 900; 
            font-size: 16px; 
            margin-bottom: 12px;
            text-shadow: 0 1px 2px rgba(231, 76, 60, 0.2);
        }
        
        /* Controls */
        .controls { 
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            background: linear-gradient(135deg, #f8f8f8 0%, #f0f0f0 100%);
            border-radius: 15px; 
            padding: 6px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
        }
        .btn { 
            border: none; 
            width: 38px; 
            height: 38px; 
            border-radius: 12px; 
            font-size: 22px; 
            background: linear-gradient(135deg, var(--main) 0%, #ffd633 100%);
            font-weight: bold; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(255, 204, 0, 0.4);
            transition: all 0.2s ease;
        }
        .btn:active {
            transform: scale(0.9);
            box-shadow: 0 1px 5px rgba(255, 204, 0, 0.3);
        }
        .count { 
            font-weight: 900; 
            font-size: 18px; 
            color: var(--text);
            min-width: 30px;
            text-align: center;
        }
        
        /* Loading */
        .loading { 
            position: fixed; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            color: var(--main);
            font-size: 24px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header"><h1>üçï PRESTO PIZZA</h1></div>
    <div id="menu-list"><div class="loading">‚è≥ Yuklanmoqda...</div></div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.setParams({ color: '#ffcc00', text_color: '#000000', is_visible: false });
        
        let cart = {};

        // MAHSULOTLAR (har biriga o'z rasmi)
        const menuData = {
            "üçï PIZZA": [
                {id: "p1", name: "Pepperoni Pizza", price: 70000, img: "https://images.unsplash.com/photo-1628840042765-356cda07504e?w=400&h=300&fit=crop"},
                {id: "p2", name: "Pollo Pizza", price: 75000, img: "https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=400&h=300&fit=crop"},
                {id: "p3", name: "Vetchina Pizza", price: 75000, img: "https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=400&h=300&fit=crop"},
                {id: "p4", name: "Carnoso Pizza", price: 85000, img: "https://images.unsplash.com/photo-1513104890138-7c749659a591?w=400&h=300&fit=crop"},
                {id: "p5", name: "4 Type Pizza", price: 90000, img: "https://images.unsplash.com/photo-1571997478779-2adcbbe9ab2f?w=400&h=300&fit=crop"},
                {id: "p6", name: "Presto Pizza", price: 100000, img: "https://images.unsplash.com/photo-1595854341625-f33ee10dbf94?w=400&h=300&fit=crop"}
            ],
            "üå≠ HOT-DOG": [
                {id: "h1", name: "Oddiy Hot-dog", price: 10000, img: "https://images.unsplash.com/photo-1612392062798-2df39a2d7ec0?w=400&h=300&fit=crop"},
                {id: "h2", name: "Canada Hot-dog", price: 13000, img: "https://images.unsplash.com/photo-1619740455993-32e7e1f9b5eb?w=400&h=300&fit=crop"},
                {id: "h3", name: "Canada 2x", price: 15000, img: "https://images.unsplash.com/photo-1590017933406-b5859d03c1b9?w=400&h=300&fit=crop"},
                {id: "h4", name: "Chicken Hot-dog", price: 18000, img: "https://images.unsplash.com/photo-1568254183919-78a4f43a2877?w=400&h=300&fit=crop"},
                {id: "h5", name: "Go'shtli Hot-dog", price: 20000, img: "https://images.unsplash.com/photo-1504754524776-8f4f37790ca0?w=400&h=300&fit=crop"},
                {id: "h6", name: "Qazili Hot-dog", price: 25000, img: "https://images.unsplash.com/photo-1599599810769-bcde5a160d32?w=400&h=300&fit=crop"}
            ],
            "ü•™ SANDWICH": [
                {id: "s1", name: "Sandwich Indeyka", price: 30000, img: "https://images.unsplash.com/photo-1528735602780-2552fd46c7af?w=400&h=300&fit=crop"},
                {id: "s2", name: "Sandwich Carnoso", price: 35000, img: "https://images.unsplash.com/photo-1619096252214-ef06c45683e3?w=400&h=300&fit=crop"},
                {id: "s3", name: "Sandwich Pollo", price: 30000, img: "https://images.unsplash.com/photo-1509722747041-616f39b57569?w=400&h=300&fit=crop"}
            ],
            "üçî BURGER": [
                {id: "b1", name: "Burger Oddiy", price: 15000, img: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop"},
                {id: "b2", name: "Chizburger", price: 17000, img: "https://images.unsplash.com/photo-1586190848861-99aa4a171e90?w=400&h=300&fit=crop"},
                {id: "b3", name: "Chicken Burger", price: 20000, img: "https://images.unsplash.com/photo-1606755962773-d324e0a13086?w=400&h=300&fit=crop"},
                {id: "b4", name: "BBQ Burger", price: 25000, img: "https://images.unsplash.com/photo-1550547660-d9450f859349?w=400&h=300&fit=crop"}
            ],
            "ü•ô DONER & BOSHQALAR": [
                {id: "d1", name: "Donar", price: 25000, img: "https://images.unsplash.com/photo-1529006557810-274b9b2fc783?w=400&h=300&fit=crop"},
                {id: "d2", name: "Non Kabob", price: 35000, img: "https://images.unsplash.com/photo-1599487488170-d11ec9c172f0?w=400&h=300&fit=crop"},
                {id: "d3", name: "KFC 1 porsiya", price: 25000, img: "https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?w=400&h=300&fit=crop"},
                {id: "d4", name: "Free", price: 15000, img: "https://images.unsplash.com/photo-1573080496219-bb080dd4f877?w=400&h=300&fit=crop"}
            ]
        };

        function render() {
            const list = document.getElementById('menu-list');
            list.innerHTML = '';
            for (let category in menuData) {
                const title = document.createElement('div');
                title.className = 'category-title';
                title.textContent = category;
                list.appendChild(title);
                const grid = document.createElement('div');
                grid.className = 'grid';
                menuData[category].forEach(product => {
                    grid.appendChild(createProductCard(product));
                });
                list.appendChild(grid);
            }
        }

        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'card';
            card.id = `card-${product.id}`;

            card.innerHTML = `
                <div class="product-media">
                    <img src="${product.img}" alt="${product.name}" loading="lazy">
                </div>
                <div class="product-info">
                    <div>
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">${product.price.toLocaleString()} UZS</div>
                    </div>
                    <div class="controls">
                        <button class="btn" onclick="updateCount('${product.id}', '${product.name}', ${product.price}, -1)">‚àí</button>
                        <span class="count" id="q-${product.id}">0</span>
                        <button class="btn" onclick="updateCount('${product.id}', '${product.name}', ${product.price}, 1)">+</button>
                    </div>
                </div>
            `;
            return card;
        }

        function updateCount(id, name, price, delta) {
            if (!cart[id]) cart[id] = { name, price, quantity: 0 };
            cart[id].quantity += delta;
            if (cart[id].quantity < 0) cart[id].quantity = 0;
            
            document.getElementById(`q-${id}`).textContent = cart[id].quantity;
            const card = document.getElementById(`card-${id}`);
            if (cart[id].quantity > 0) card.classList.add('has-items');
            else card.classList.remove('has-items');
            calculateTotal();
        }

        function calculateTotal() {
            let total = 0, count = 0;
            for (let k in cart) { 
                total += cart[k].price * cart[k].quantity; 
                count += cart[k].quantity; 
            }
            if (total > 0) {
                tg.MainButton.setText(`üõí BUYURTMA BERISH: ${total.toLocaleString()} UZS (${count} ta)`);
                tg.MainButton.show();
            } else {
                tg.MainButton.hide();
            }
        }

        tg.onEvent('mainButtonClicked', () => {
            const order = Object.values(cart).filter(i => i.quantity > 0);
            tg.sendData(JSON.stringify(order));
        });

        window.onload = () => { 
            render(); 
            tg.ready(); 
            setTimeout(() => {
                const loading = document.querySelector('.loading');
                if(loading) loading.remove();
            }, 300); 
        };
    </script>
</body>
</html>