<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Presto Pizza</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { 
            --main: #ffcc00; 
            --bg: #0a0a0a; 
            --card: #fff; 
            --text: #000; 
            --shadow: rgba(255, 204, 0, 0.3);
        }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            color: white; 
            padding: 0 15px 160px 15px; 
            overflow-x: hidden; 
        }
        
        /* Header */
        .header { 
            position: sticky; 
            top: 0; 
            background: linear-gradient(180deg, rgba(10,10,10,0.98) 0%, rgba(10,10,10,0.95) 100%);
            backdrop-filter: blur(10px);
            padding: 20px 0; 
            z-index: 100; 
            border-bottom: 3px solid var(--main); 
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }
        .header h1 { 
            color: var(--main); 
            font-size: 28px; 
            text-align: center; 
            text-transform: uppercase; 
            letter-spacing: 2px;
            text-shadow: 2px 2px 8px rgba(255, 204, 0, 0.4);
        }
        
        /* Category */
        .category-title { 
            color: var(--main); 
            margin: 30px 0 20px; 
            border-left: 5px solid var(--main); 
            padding-left: 15px; 
            text-transform: uppercase; 
            font-weight: 900; 
            font-size: 20px;
            letter-spacing: 1px;
            text-shadow: 1px 1px 5px rgba(255, 204, 0, 0.3);
        }
        
        /* Grid */
        .grid { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 15px; 
            margin-bottom: 20px;
        }
        
        /* Card */
        .card { 
            background: var(--card); 
            border-radius: 20px; 
            padding: 0;
            color: var(--text); 
            display: flex; 
            flex-direction: column;
            min-height: 280px;
            box-shadow: 0 8px 25px var(--shadow);
            transition: all 0.3s ease;
            overflow: hidden;
        }
        .card:active {
            transform: scale(0.98);
        }
        .card.has-items { 
            border: 3px solid var(--main);
            box-shadow: 0 0 30px var(--shadow);
        }
        
        /* Image Container */
        .product-media { 
            width: 100%; 
            height: 170px; /* Balandlik 140px dan 170px ga oshirildi */
            display: flex; 
            align-items: center; 
            justify-content: center;
            background: #fdfdfd;
            overflow: hidden;
            position: relative;
            border-bottom: 1px solid #eee; /* Rasm va matn orasiga chiziq */
        }
        
        .product-media img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; /* Rasm cho'zilmaydi, joyni to'ldiradi */
            transition: transform 0.3s ease;
        }

        .card:active .product-media img {
            transform: scale(1.08); /* Bosganda rasm biroz yaqinlashadi */
        }
        
        /* Product Info */
        .product-info {
            padding: 15px 12px; /* Ichki masofalar oshirildi */
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            text-align: center; /* Hamma yozuvlar markazga olindi */
        }

        .product-name { 
            font-weight: 700; 
            font-size: 16px; 
            margin-bottom: 10px; /* Matn va narx orasi ochildi */
            line-height: 1.2;
            color: #1a1a1a;
            min-height: 38px; /* Hamma kartalar bir xil bo'lishi uchun */
        }

        .product-price { 
            color: #d32f2f; 
            font-weight: 800; 
            font-size: 17px; 
            margin-bottom: 15px; /* Narx va tugma orasi ochildi */
        }
        
        /* Controls */
        .controls { 
            display: flex; 
            align-items: center; 
            justify-content: space-between;     
            background: linear-gradient(135deg, #f8f8f8 0%, #f0f0f0 100%);
            border-radius: 15px; 
            padding: 6px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
        }
        .btn { 
            border: none; 
            width: 38px; 
            height: 38px; 
            border-radius: 12px; 
            font-size: 22px; 
            background: linear-gradient(135deg, var(--main) 0%, #ffd633 100%);
            font-weight: bold; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(255, 204, 0, 0.4);
            transition: all 0.2s ease;
        }
        .btn:active {
            transform: scale(0.9);
            box-shadow: 0 1px 5px rgba(255, 204, 0, 0.3);
        }
        .count { 
            font-weight: 900; 
            font-size: 18px; 
            color: var(--text);
            min-width: 30px;
            text-align: center;
        }
        
        /* Loading */
        .loading { 
            position: fixed; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            color: var(--main);
            font-size: 24px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header"><h1>üçï PRESTO PIZZA</h1></div>
    <div id="menu-list"><div class="loading">‚è≥ Yuklanmoqda...</div></div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.setParams({ color: '#ffcc00', text_color: '#000000', is_visible: false });
        
        let cart = {};

        // MAHSULOTLAR (har biriga o'z rasmi)
      const menuData = {
    "üçï PITSA": [
        {id: "p1", name: "Pizza Pepperoni", price: 70000, img: "https://otash2002.github.io/prezto_pizza_bot/img/peperonni.png"},
        {id: "p2", name: "Pizza Pollo", price: 75000, img: "https://otash2002.github.io/prezto_pizza_bot/img/pollo.png"},
        {id: "p3", name: "Pizza Vetchina", price: 75000, img: "https://avatars.mds.yandex.net/i?id=992fa77708ddfcbc1330a5f3319b0fbc76b7f726-12540459-images-thumbs&n=13"},
        {id: "p4", name: "Pizza Carnoso", price: 85000, img: "https://otash2002.github.io/prezto_pizza_bot/img/pitsagosht.png"},
        {id: "p5", name: "Pizza 4 Type", price: 90000, img: "https://otash2002.github.io/prezto_pizza_bot/img/PITSA4.png"},
        {id: "p6", name: "Presto Pizza", price: 100000, img: "https://otash2002.github.io/prezto_pizza_bot/img/presto.png"}
    ],
    "üå≠ HOT-DOG": [
        {id: "h1", name: "Hot-Dog Oddiy", price: 10000, img: "https://avatars.mds.yandex.net/i?id=246aa04abd613e368ee1047ba6e11343f8dbdd57-4232390-images-thumbs&n=13"},
        {id: "h2", name: "Hot-Dog Canada", price: 13000, img: "https://avatars.mds.yandex.net/i?id=8ac48ba30280d094ad7138170f0682688b02ffb1-3518654-images-thumbs&n=13"},
        {id: "h3", name: "Hot-Dog Canada 2x", price: 15000, img: "https://avatars.mds.yandex.net/i?id=fd5199baaaea7dc8b96ce54cbe792c99fe4aba84-5428196-images-thumbs&n=13"},
        {id: "h4", name: "Chicken Hot-Dog", price: 18000, img: "https://avatars.mds.yandex.net/i?id=23f0b7aefdfb8e2573faa243dfdcf6683101d95b-4546582-images-thumbs&n=13"},
        {id: "h5", name: "Go'shtli Hot-Dog", price: 20000, img: "https://avatars.mds.yandex.net/i?id=42e47a6f47445ea019c18e060d2a95409b8a8c3c-4220100-images-thumbs&n=13"}
    ],
    "ü•™ SANDWICH": [
        {id: "s1", name: "Sandwich Indeyka", price: 35000, img: "https://otash2002.github.io/prezto_pizza_bot/img/donar.png"},
        {id: "s2", name: "Sandwich Carnoso", price: 40000, img: "https://avatars.mds.yandex.net/i?id=f79ed8924f64c758df6a58b380915e35246f3de4-12514352-images-thumbs&n=13"},
        {id: "s3", name: "Sandwich Pollo", price: 35000, img: "https://avatars.mds.yandex.net/i?id=9072b6b076c7bc84cbe324a854bef8a51ec18209-5679382-images-thumbs&n=13"}
    ],
    "ü•ô LAVASH & DONER": [
        {id: "l1", name: "Lavash", price: 25000, img: "https://avatars.mds.yandex.net/i?id=c06f400b649c1e2d323228922c8288bba382d67a-5177173-images-thumbs&n=13"},
        {id: "l2", name: "Lavash Sirli", price: 30000, img: "https://yukber.uz/image/cache/catalog/179ccd00e22-600x600.jpg"},
        {id: "d1", name: "Doner", price: 25000, img: "https://otash2002.github.io/prezto_pizza_bot/img/donarr.png"},
        {id: "f1", name: "Free", price: 18000, img: "https://avatars.mds.yandex.net/i?id=e18c4f8d87c317a827a82b0c8f9e29804b85ef0e-9263927-images-thumbs&n=13"}
    ],
    "üçî BURGER": [
        {id: "b1", name: "Burger Oddiy", price: 15000, img: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=500&auto=format&fit=crop"},
        {id: "b2", name: "Chizburger", price: 17000, img: "https://images.unsplash.com/photo-1586190848861-99aa4a171e90?w=500&auto=format&fit=crop"},
        {id: "b3", name: "Chicken Burger", price: 20000, img: "https://images.unsplash.com/photo-1606755962773-d324e0a13086?w=500&auto=format&fit=crop"},
        {id: "b4", name: "Double Burger", price: 25000, img: "https://images.unsplash.com/photo-1550547660-d9450f859349?w=500&auto=format&fit=crop"}
    ],
    "ü•§ ICHIMLIKLAR": [
        {id: "i1", name: "Choy", price: 5000, img: "https://avatars.mds.yandex.net/i?id=d95b58a3fc4c60cc0e2c29c4e508f9ad8fdaf847-6478260-images-thumbs&n=13"},
        {id: "i2", name: "Limonli Choy", price: 15000, img: "https://images.unsplash.com/photo-1564890369478-c89ca6d9cde9?w=500&auto=format&fit=crop"},
        {id: "i3", name: "Kofe Cappuchino", price: 5000, img: "https://images.unsplash.com/photo-1572442388796-11668a67e53d?w=500&auto=format&fit=crop"},
        {id: "i4", name: "Kofe 3v1", price: 3000, img: "https://avatars.mds.yandex.net/i?id=1a126b64f56ed01b06a13b2f8a6964ae00981a20-9146178-images-thumbs&n=13"}
    ]
};
        function render() {
            const list = document.getElementById('menu-list');
            list.innerHTML = '';
            for (let category in menuData) {
                const title = document.createElement('div');
                title.className = 'category-title';
                title.textContent = category;
                list.appendChild(title);
                const grid = document.createElement('div');
                grid.className = 'grid';
                menuData[category].forEach(product => {
                    grid.appendChild(createProductCard(product));
                });
                list.appendChild(grid);
            }
        }

        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'card';
            card.id = `card-${product.id}`;

            card.innerHTML = `
                <div class="product-media">
                    <img src="${product.img}" alt="${product.name}" loading="lazy">
                </div>
                <div class="product-info">
                    <div>
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">${product.price.toLocaleString()} UZS</div>
                    </div>
                    <div class="controls">
                        <button class="btn" onclick="updateCount('${product.id}', '${product.name}', ${product.price}, -1)">‚àí</button>
                        <span class="count" id="q-${product.id}">0</span>
                        <button class="btn" onclick="updateCount('${product.id}', '${product.name}', ${product.price}, 1)">+</button>
                    </div>
                </div>
            `;
            return card;
        }

        function updateCount(id, name, price, delta) {
            if (!cart[id]) cart[id] = { name, price, quantity: 0 };
            cart[id].quantity += delta;
            if (cart[id].quantity < 0) cart[id].quantity = 0;
            
            document.getElementById(`q-${id}`).textContent = cart[id].quantity;
            const card = document.getElementById(`card-${id}`);
            if (cart[id].quantity > 0) card.classList.add('has-items');
            else card.classList.remove('has-items');
            calculateTotal();
        }

        function calculateTotal() {
            let total = 0, count = 0;
            for (let k in cart) { 
                total += cart[k].price * cart[k].quantity; 
                count += cart[k].quantity; 
            }
            if (total > 0) {
                tg.MainButton.setText(`üõí BUYURTMA BERISH: ${total.toLocaleString()} UZS (${count} ta)`);
                tg.MainButton.show();
            } else {
                tg.MainButton.hide();
            }
        }

        tg.onEvent('mainButtonClicked', () => {
            const order = Object.values(cart).filter(i => i.quantity > 0);
            tg.sendData(JSON.stringify(order));
        });

        window.onload = () => { 
            render(); 
            tg.ready(); 
            setTimeout(() => {
                const loading = document.querySelector('.loading');
                if(loading) loading.remove();
            }, 300); 
        };
    </script>
</body>
</html>